(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(2),a=t.n(r),o=t(15),u=t.n(o),i=(t(21),t(5)),s=t(3),d=t(4),j=t.n(d),l="/api/persons",b=function(){return j.a.get(l).then((function(e){return e.data}))},h=function(e){var n=e.person,t=e.handleDelete;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:[n.name," ",n.number]}),Object(c.jsx)("button",{onClick:function(){return t(n)},children:"Delete"})]})},m=function(e){var n=e.persons,t=e.search,r=e.handleDel;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Numbers"}),n.filter((function(e){return new RegExp(t,"i").test(e.name)})).map((function(e){return Object(c.jsx)(h,{person:e,handleDelete:r},e.id)}))]})},f=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Add a new entry"}),Object(c.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(c.jsx)(x,{name:"Name",value:e.newName,onChange:e.handleNewName}),Object(c.jsx)(x,{name:"Number",value:e.newNumber,onChange:e.handleNewNumber}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})]})},O=function(e){var n=e.search,t=e.handleSearch;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Search"}),Object(c.jsx)(x,{name:"Query",value:n,onChange:t})]})},x=function(e){var n=e.name,t=e.value,r=e.onChange;return Object(c.jsxs)("div",{children:[n,": ",Object(c.jsx)("input",{value:t,onChange:r})]})},p=function(e){var n=e.message,t={color:e.color,background:"whitesmoke",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===n&&(t.display="none"),Object(c.jsx)("span",{style:t,children:n})},v=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),u=Object(s.a)(o,2),d=u[0],h=u[1],x=Object(r.useState)(""),v=Object(s.a)(x,2),g=v[0],w=v[1],N=Object(r.useState)(""),S=Object(s.a)(N,2),k=S[0],y=S[1],C=Object(r.useState)({message:null,color:"green"}),D=Object(s.a)(C,2),A=D[0],E=D[1];function B(e,n){E(Object(i.a)(Object(i.a)({},A),{},{message:e,color:n})),setTimeout((function(){return E(Object(i.a)(Object(i.a)({},A),{},{message:null}))}),4e3)}return Object(r.useEffect)((function(){return b().then((function(e){return a(e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(p,{message:A.message,color:A.color}),Object(c.jsx)(O,{search:k,handleSearch:function(e){y(e.target.value)}}),Object(c.jsx)(f,{handleSubmit:function(e){e.preventDefault();var n,c={name:d,number:g},r=t.find((function(e){return e.name===d}));void 0!==r&&window.confirm("".concat(c.name," is already in the phonebook, replace the old number with a new one?"))?(function(e,n){return j.a.put("".concat(l,"/").concat(n),e).then((function(){return b()}))}(c,r.id).then((function(e){a(e)})),B("Changed number of '".concat(d,"'"),"green")):(n=c,j.a.post(l,n).then((function(e){return e.data}))).then((function(e){a(t.concat(e)),B("Added '".concat(d,"'"),"green")})).catch((function(e){B(e.response.data.error,"red")})),w(""),h("")},newName:d,handleNewName:function(e){h(e.target.value)},newNumber:g,handleNewNumber:function(e){w(e.target.value)}}),Object(c.jsx)(m,{persons:t,search:k,handleDel:function(e){var n;window.confirm("Delete ".concat(e.name,"?"))&&(n=e.id,j.a.delete("".concat(l,"/").concat(n)).then((function(){return b()}))).then((function(e){return a(e)})).catch((function(){return B("'".concat(e.name,"' was already deleted from server."),"red")}))}})]})};u.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.68df3266.chunk.js.map